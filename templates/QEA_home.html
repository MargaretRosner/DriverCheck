<!DOCTYPE html>
<html>
<title>QEA: DriverCheck</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Raleway">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<style>
body,h1,h2,h3,h4,h5,h6 {font-family: "Raleway", sans-serif}
body, html {
    height: 100%;
    line-height: 1.8;
}
/* Full height image header */
.bgimg-1 {
    background-position: center;
    background-size: cover;
    background-image: url("{{ url_for('static', filename='car_road2.jpg') }}");
    min-height: 100%;
}
.w3-bar .w3-button {
    padding: 16px;
}
</style>
<body>

<!-- Navbar (sit on top) -->
<div class="w3-top">
  <div class="w3-bar w3-white w3-card-2" id="myNavbar">
    <!-- Right-sided navbar links -->
    <div class="w3-right w3-hide-small">
      <a href="#about" class="w3-bar-item w3-button">PROJECT</a>
      <a href="#team" class="w3-bar-item w3-button"><i class="fa fa-user"></i>TEAM</a>
      <a href="#work" class="w3-bar-item w3-button"><i class="fa fa-th"></i>LINKS</a>
    </div>
    <!-- Hide right-floated links on small screens and replace them with a menu icon -->
  </div>
</div>


<!-- Header with full-height image -->
<header class="bgimg-1 w3-display-container w3-grayscale-min" id="home">
  <div class="w3-display-left w3-text-white" style="padding:48px">
    <span class="w3-jumbo w3-hide-small">Check Your Driving</span><br>
    <span class="w3-xxlarge w3-hide-large w3-hide-medium">Check your Driving</span><br>
    <span class="w3-large">Quantitatively and objectively assessing comfort of driving</span>
    <p><a href="#about" class="w3-button w3-white w3-padding-large w3-large w3-margin-top w3-opacity w3-hover-opacity-off">Learn more today</a></p>
  </div>
</header>

<!-- About Section -->
<div class="w3-container" style="padding:128px 16px" id="about">
  <h3 class="w3-center" style="font-size:30px">THE PROJECT</h3>
  <p class="w3-center w3-large" style="font-size:25px">DESCRIPTION</p>
  <div class="w3-row-padding w3-center" style="margin-top:10px">
    <p style="font-size:15px">As part of a project for our Quantitative Engineering Analysis class at Olin College, we created a proof of concept model for an app that
      would enable car drivers to quantitatively asses the comfort of their driving based on the magnitude of acceleration and jerk (quick changes in acceleration)
      measured on their smartphones while driving.
    </p>
  </div>

  <p class="w3-center w3-large"  style="font-size:25px">USERS</p>
  <div class="w3-row-padding w3-center" style="margin-top:10px">
    <p  style="font-size:15px"> Our app would benefit any individual looking to better understand their driving style.
      We envision our app being used by a diverse audience including: new drivers, parents, driving instructors,
      and friends in a disagreement over who’s the better driver.
  </p>
  </div>

  <p class="w3-center w3-large"  style="font-size:25px">Our MVP</p>
  <div class="w3-row-padding w3-center" style="margin-top:10px">
    <p  style="font-size:15px">Our MVP analyzes two different aspects of driving, aggressiveness and jerk. Aggressiveness refers to the maximum acceleration that
      someone is willing to take on  based on accelerometer and gyroscope data collected using a user's phone. The data is then analyzed for comfort based on both
      jerk and acceleration magnitudes. To present the data in a useful and compelling manner we then visualize the analysis so drivers can easily understand and
      compare their driving styles.
    </p>
  </div>
</div>

<!-- Promo Section - "We know design" -->
<div class="w3-container w3-light-grey" style="padding:128px 16px">
  <div class="w3-row-padding">
    <div class="w3-col m6">
      <h3>Sensor Selection</h3>
      <p  style="font-size:15px">
      We choose to leverage the sensors already present in a user's phone to
      create our application. We used the PowerSense iphone app to collect the data needed to create our app.
      See Figure 1. for a visualization of the type of data collected.
      <br>
      <br>
      For this test, we drove counter clockwise around a traffic circle (ellipse) three times. The sensor calculated the orientation of the car
      based on accelerometer and gyroscope data. The yaw data shows the car constantly increasing (besides where the angle wraps back around from pi to -pi.
      <br>
      <br>
      The pitch data best shows the car tilt up while accelerating from a stop at about 13 seconds, and tilting down (forward) while slowing to a stop
      around 65 seconds. The roll data shows the car was constantly tilted to the same side (all the roll data was positive), and the car rolled more
      around some parts of the ellipse than others (the wavy shape).
    </p>
    </div>
    <div class="w3-col m6">
    <figure>
      <img src="{{ url_for('static', filename='Headings.png') }}" id = "g2" style="width:600px;height:400px;">
      <figcaption>Fig.1 - Sensor data of phone position in three axis after driving in an ellipse.</figcaption>
    </figure>
    </div>
  </div>

  <div class="w3-row-padding">
    <div class="w3-col m6">
      <h3>Proof of Concept</h3>
      <p  style="font-size:15px">
        After first identifying our users and the goal of our project the first thing we did was collect some data.
        To do so we mounted a cell phone to the roof of a consumer vehicle as seen in Figure 2. Using acceleration and gyro data
        collected from a user's smartphone we first rotated the accelerations measured by the phone into the global frame to
        remove gravity and filtered the data using a low pass filter to remove high frequencies. Once the data was in the global
        reference frame we took the derivative of the accelerations to isolate jerk (sudden changes in acceleration).
        <br>
        <br>


      </p>
    </div>
    <div class="w3-col m6">
      <figure>
        <img src="{{ url_for('static', filename='roofphone.jpg') }}" id = "g1" style="width:400px;height:200px;">
        <figcaption>Fig.2 - Smartphone mounted on roof of vehicle </figcaption>
      </figure>
      <figure>
        <img src="{{ url_for('static', filename='GlobalAcc.png') }}" id = "g1" style="width:600px;height:400px;">
        <figcaption>Fig.3 - Accelerations of a car driving in an ellipse in the global frame. </figcaption>
      </figure>
    </div>

    <div class="w3-row-padding">
      <div class="w3-col m6">
        <h3>Validation</h3>
        <p  style="font-size:15px">To validate our model the first thing we did was check to ensure our rotation matrix was
          doing what we expected. We did so by creating a unit vector, [0 0 1], in the khat direction and rotating it into the
          global frame using the attitude data collected from the phone. We also videotaped a driver driving when we collected our
          driving data for comfort analysis and compared the videos (<a href="https://photos.app.goo.gl/Vtfh95rC0pEnNO1F2">slow and smooth</a>,
          <a href="https://photos.app.goo.gl/zLG6k5iWadigup3u2">slow and jerky</a>,
          <a href="https://photos.app.goo.gl/m1AeTD3aG28OY4kF3"> aggressive and smooth</a>,
          <a href="https://photos.app.goo.gl/cxgtVSfsLYTcjtik2https://photos.app.goo.gl/cxgtVSfsLYTcjtik2"> aggressive and jerky</a>) to the graphs we
          produced from the data to qualitatively assess their accuracy.
        </p>
      </div>
        <div class="w3-col m6">
          <figure>
            <img src="{{ url_for('static', filename='Ihats.png') }}" id = "g3" style="width:600px;height:400px;">
            <figcaption>Fig.6 - Validation of our rotation matrix using unit vector Ihat in the khat direction. </figcaption>
          </figure>
        </div>
      </div>
    <div class="w3-col m6">
      <h3>Comfort Analysis</h3>
      We choose to define driver comfort as the combination of jerk and overall acceleration. To analyze driving comfort we assumed that people
      are more comfortable with more gradual acceleration (smoothly accelerating), and smooth transitions into cornering (jerk). Our combined algorithm
      for capturing both of these parameters is simply the average magnitude of the car’s acceleration. This value is affected by a few things. The first is
      how fast the car goes. A test on the same track going faster will result in a higher acceleration sum. This is our measure of aggression. Aggressive
      drivers tend to reach higher top speeds in areas where less aggressive drivers do not. The second area is in the jerkiness of someone’s cornering.
      If a driver’s cornering is not consistent, there will be acceleration for starting and stopping many smaller corners. Taking the magnitude of the
      accelerations, brings all the negative accelerations to positive. Ultimately this results in more acceleration for drivers that corner inconsistently.
      </p>
    </div>
    <div class="w3-col m6">
      <figure>
        <img src="{{ url_for('static', filename='ComfortGraph.png') }}" id = "g1" style="width:600px;height:400px;">
        <figcaption>Fig.4 - Graph depicting the magnitude of the acceleration with different controlled driving styles.</figcaption>
      </figure>
      <figure>
        <img src="{{ url_for('static', filename='BarGraph.png') }}" id = "g1" style="width:600px;height:400px;">
        <figcaption>Fig.5 - Comfort was assesed as the scaled integrals in the global frame. The higher the comfort score, the more uncomfortable the
          driving is assumed to be. </figcaption>
      </figure>
    </div>
  </div>
  <br>
    <div class="w3-row-padding">
      <div class="w3-col m6">
        <h3>Dead Ends</h3>
        <p  style="font-size:15px">
          Initially we also wanted to determine the position of the driver in the global frame using the acceleration measured on the phone. After
          working on this challenge for some time we determined that mapping accelerations in the phone’s frame to the global frame was not going to
          be as accurate as we had hoped due to drifting data. See Figure 7 for a visual representation of the data drifting in the khat direction.
          <br>
          <br>
          When manually “trimming” the data to drift less by adding or subtracting constants until the visual resembled an ellipse, the data was still
          qualitatively jumpy and shaky. The “trimmed” velocities are shown in Figure 8. Even though there is less drift, the shape of the velocities
          is still quite warped, making the position data (which is after one more derivative) unusable for the driver.
          <br>
          <br>
          One of our next goals was to determine a way to assess not only the comfort of someone's driving but also the safety of their driving through
          analyzing the magnitude of jerk. We were unable to incorporate this aspect of analysis into our final product because we did not have enough
          time to determine the best way to filter the data without also filtering out the jerk. Instead we found a parameter that would group aggressiveness
          and jerk together instead of separating them out.
          <br>
          <br>
          In addition to using rotating reference frames in our project we also analyzed the frequency of the acceleration. While, this analysis did not
          provide us with any insightful information about driving style it was interesting to have completed.
        </p>
      </div>
        <div class="w3-col m6">
          <figure>
            <img src="{{ url_for('static', filename='VelocitiesTrim.png') }}" id = "g3" style="width:600px;height:400px;">
            <figcaption>Fig.7 - Velocity plotted in the global fram calculated from the acceleration data collected. </figcaption>
          </figure>
          <figure>
            <img src="{{ url_for('static', filename='Velocities_Untrimmed.png') }}" id = "g3" style="width:600px;height:400px;">
            <figcaption>Fig.8 - The drift of velocity plotted in the global fram calculated from the acceleration data collected. </figcaption>
          </figure>
        </div>
      </div>
      <div class="w3-row-padding">
        <div class="w3-col m6">
          <h3>Next Steps</h3>
          <p  style="font-size:15px">
            One of our initial outcomes was to determine the safety of someone’s driving through analyzing the data collected on the phone. We were unable to do so for this
            pass because we did not have the time to determine the best way to classify someone’s driving as either safe or unsafe. Our current model makes it easy
             to see differences in drivers, but we choose to make no objective statement about what makes a driver safe or not because the scaled integral of the
             acceleration changes based on how fast you drive even if you are driving smoothly.

          </p>
        </div>
        <div class="w3-col m6">
          <figure>
            <img src="{{ url_for('static', filename='Jerk.png') }}" id = "g3" style="width:600px;height:400px;">
            <figcaption>Fig.9 - Jerk calculated from data collected from a phone moving along a flat table. </figcaption>
          </figure>
          <figure>
            <img src="{{ url_for('static', filename='JerkScore.png') }}" id = "g3" style="width:400px;height:400px;">
            <figcaption>Fig.10 - Score for magnitude of the jerk calculated from a phone on a flat table. </figcaption>
          </figure>
        </div>
        </div>
  </div>
</div>

<!-- Links Section -->
<div class="w3-container" style="padding:128px 16px" id="work">
  <h3 class="w3-center" style="font-size:30px">LINKS</h3>
  <p class="w3-center w3-large" style="font-size:25px">The Pitch: QEA 10/23/2017</p>
  <p class="w3-center w3-large">
  <a href="https://docs.google.com/presentation/d/15uuBpJbfVPo0_WVuwS9a6kxYaQT1qdnZ40NcJw1B5k4/edit?usp=sharing"> View our Presentation!</a>
  </p>
  <p class="w3-center w3-large" style="font-size:25px">Matlab Scripts</p>
  <p class="w3-center w3-large">
  <a href="https://drive.google.com/open?id=0B1Q9ZaUOL0C2Y1h3MmpRcUl6UlU">Loading and filtering data</a>
  </p>
  <p class="w3-center w3-large">
  <a href="https://drive.google.com/file/d/0B1Q9ZaUOL0C2cGJyTmhMZ3NFd00/view?usp=sharing">Analysis</a>
  </p>
  <p class="w3-center w3-large">
  <a href="url">Matlab Notebook PDF</a>
  </p>


</div>

<!-- Team Section -->
<div class="w3-container" style="padding:128px 16px" id="team">
  <h3 class="w3-center"  style="font-size:30px">THE CLASS</h3>
  <div class="w3-row-padding w3-center" style="margin-top:10px">
    <p  style="font-size:15px">"The QEA experiment is a designated alternative for Signals and Systems, Dynamics, Linearity 1 and 2 and a foundational physics course;
    our hope is this experiment will lead to a more coherent ‘analysis stream’ down the road” - Mark Somerville.</p>
  </div>
  <h3 class="w3-center"  style="font-size:30px">THE TEAM</h3>
  <p class="w3-center w3-large">Maggie Rosner and Colvin Chapman</p>
</div>


<!-- Footer -->
<footer class="w3-center w3-black w3-padding-64">
  <a href="#home" class="w3-button w3-light-grey"><i class="fa fa-arrow-up w3-margin-right"></i>To the top</a>
</footer>

</body>
</html>
